.TH "PCB303" 3 "Mon Dec 4 2023" "MCPU_MASTER Software Description" \" -*- nroff -*-
.ad l
.nh
.SH NAME
PCB303 \- This class implements the functions of the \fBPCB303\fP Module  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <PCB303\&.h>\fP
.PP
Inherits \fBCanDeviceProtocol\fP\&.
.SS "Classes"

.in +1c
.ti -1c
.RI "class \fBformatBlades\fP"
.br
.RI "This class provides a contenitor for a CALIBRATION blade setup"
.in -1c
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBPCB303\fP ()"
.br
.RI "\fBPCB303\fP Class constructor\&. "
.in -1c
.SS "Static Public Member Functions"

.PP
.RI "\fB\fP"
.br

.in +1c
.in +1c
.ti -1c
.RI "static void \fBsetAutoCollimationMode\fP (void)"
.br
.RI "This function sets the format collimation to AUTO mode\&. "
.ti -1c
.RI "static void \fBsetOpenCollimationMode\fP (void)"
.br
.RI "This function sets the format collimation to OPEN mode\&. "
.ti -1c
.RI "static void \fBsetCalibrationCollimationMode\fP (\fBformatBlades\fP^ blades)"
.br
.RI "This function sets the format collimation to CALIBRATION mode\&. "
.ti -1c
.RI "static void \fBsetTomoCollimationMode\fP (void)"
.br
.RI "This function activates the Tomo collimation mode\&. "
.ti -1c
.RI "static void \fBsetCustomCollimationMode\fP (\fBColliStandardSelections\fP custom)"
.br
.RI "This function sets the format collimation to CUSTOM mode\&. "
.ti -1c
.RI "static void \fBresetFaults\fP (void)"
.br
.RI "In case of collimation fault condition, this function starts a new collimation attempt\&. "
.in -1c
.in -1c
.SS "Static Public Attributes"

.in +1c
.ti -1c
.RI "static \fBPCB303\fP ^ \fBdevice\fP = gcnew \fBPCB303\fP()"
.br
.in -1c
.SS "Private Types"

.in +1c
.ti -1c
.RI "enum class \fBcollimationModeEnum\fP { \fBcollimationModeEnum::AUTO_COLLIMATION\fP = 0, \fBcollimationModeEnum::CUSTOM_COLLIMATION\fP, \fBcollimationModeEnum::CALIBRATION_MODE\fP, \fBcollimationModeEnum::OPEN_MODE\fP, \fBcollimationModeEnum::TOMO_MODE\fP }"
.br
.RI "This enumeration class describes the possible collimation modes the Application can select"
.in -1c
.in +1c
.ti -1c
.RI "enum class \fBStatusRegisters\fP { \fBSYSTEM_STATUS_REGISTER\fP = 0, \fBSYSTEM_CURRENT_FB_REGISTER\fP, \fBSYSTEM_CURRENT_LR_REGISTER\fP, \fBSYSTEM_CURRENT_T_REGISTER\fP }"
.br
.RI "
.br
 This enumeration class defines the Indexes of the protocol Status Registers  "
.ti -1c
.RI "enum class \fBStatusDataBytes\fP { \fBSYSTEM_COLLIMATION_STATUS\fP = 0, \fBSYSTEM_FORMAT_INDEX\fP, \fBSYSTEM_TOMO_PULSE\fP, \fBSYSTEM_SPARE\fP }"
.br
.RI "This enumeration class defines the data content (D0 to D3) of the System Status Register\&.  "
.ti -1c
.RI "enum class \fBCollimationStatusCode\fP { \fBCOLLI_STATUS_OPEN_FORMAT\fP = 0, \fBCOLLI_STATUS_STANDARD_FORMAT\fP, \fBCOLLI_STATUS_CALIB_FORMAT\fP, \fBCOLLI_STATUS_TOMO_MODE\fP, \fBCOLLI_STATUS_OUT_OF_POSITION\fP, \fBCOLLI_STATUS_2D_EXECUTING\fP }"
.br
.RI "This is the SYSTEM_COLLIMATION_STATUS byte definition of the SYSTEM status register\&.  "
.ti -1c
.RI "enum class \fBCommandregister\fP { \fBABORT_COMMAND\fP = 0, \fBSET_OPEN_FORMAT_COMMAND\fP, \fBSET_STANDARD_FORMAT_COMMAND\fP, \fBSET_CALIBRATION_FORMAT_COMMAND\fP, \fBSET_TOMO_MODE_COMMAND\fP }"
.br
.RI "
.br
 This enumeration class defines the Indexes of the Command Execution "
.ti -1c
.RI "enum class \fBColliStandardSelections\fP { \fBCOLLI_NOT_STANDARD\fP = 0, \fBCOLLI_INVALID_FORMAT\fP = COLLI_NOT_STANDARD, \fBCOLLI_STANDARD1\fP, \fBCOLLI_STANDARD_24x30\fP = COLLI_STANDARD1, \fBCOLLI_STANDARD2\fP, \fBCOLLI_STANDARD3\fP, \fBCOLLI_STANDARD4\fP, \fBCOLLI_STANDARD5\fP, \fBCOLLI_STANDARD6\fP, \fBCOLLI_STANDARD7\fP, \fBCOLLI_STANDARD8\fP, \fBCOLLI_STANDARD9\fP, \fBCOLLI_STANDARD10\fP, \fBCOLLI_STANDARD11\fP, \fBCOLLI_STANDARD12\fP, \fBCOLLI_STANDARD13\fP, \fBCOLLI_STANDARD14\fP, \fBCOLLI_STANDARD15\fP, \fBCOLLI_STANDARD16\fP, \fBCOLLI_STANDARD17\fP, \fBCOLLI_STANDARD18\fP, \fBCOLLI_STANDARD19\fP, \fBCOLLI_STANDARD20\fP, \fBCOLLI_STANDARD_LEN\fP }"
.br
.RI "This is the SYSTEM_FORMAT_INDEX byte definition of the SYSTEM status register\&. This byte reports the current select collimation format\&.  "
.ti -1c
.RI "enum class \fBDataRegisters\fP { \fBDATA_CALIBRATION_FB\fP = 0, \fBDATA_CALIBRATION_LR\fP, \fBDATA_CALIBRATION_T\fP }"
.br
.RI "This is the enumeration class definigs the indexes of the protocol DATA registers 
.br
  "
.ti -1c
.RI "enum class \fBParamRegisters\fP { \fBPARAM_STANDARD_FORMAT_FT\fP = 0, \fBPARAM_STANDARD_FORMAT_LR1\fP, \fBPARAM_STANDARD_FORMAT_B1\fP, \fBPARAM_STANDARD_FORMAT_LR2\fP, \fBPARAM_STANDARD_FORMAT_B2\fP, \fBPARAM_STANDARD_FORMAT_LR3\fP, \fBPARAM_STANDARD_FORMAT_B3\fP, \fBPARAM_STANDARD_FORMAT_LR4\fP, \fBPARAM_STANDARD_FORMAT_B4\fP, \fBPARAM_STANDARD_FORMAT_LR5\fP, \fBPARAM_STANDARD_FORMAT_B5\fP, \fBPARAM_STANDARD_FORMAT_LR6\fP, \fBPARAM_STANDARD_FORMAT_B6\fP, \fBPARAM_STANDARD_FORMAT_LR7\fP, \fBPARAM_STANDARD_FORMAT_B7\fP, \fBPARAM_STANDARD_FORMAT_LR8\fP, \fBPARAM_STANDARD_FORMAT_B8\fP, \fBPARAM_STANDARD_FORMAT_LR9\fP, \fBPARAM_STANDARD_FORMAT_B9\fP, \fBPARAM_STANDARD_FORMAT_LR10\fP, \fBPARAM_STANDARD_FORMAT_B10\fP, \fBPARAM_STANDARD_FORMAT_LR11\fP, \fBPARAM_STANDARD_FORMAT_B11\fP, \fBPARAM_STANDARD_FORMAT_LR12\fP, \fBPARAM_STANDARD_FORMAT_B12\fP, \fBPARAM_STANDARD_FORMAT_LR13\fP, \fBPARAM_STANDARD_FORMAT_B13\fP, \fBPARAM_STANDARD_FORMAT_LR14\fP, \fBPARAM_STANDARD_FORMAT_B14\fP, \fBPARAM_STANDARD_FORMAT_LR15\fP, \fBPARAM_STANDARD_FORMAT_B15\fP, \fBPARAM_STANDARD_FORMAT_LR16\fP, \fBPARAM_STANDARD_FORMAT_B16\fP, \fBPARAM_STANDARD_FORMAT_LR17\fP, \fBPARAM_STANDARD_FORMAT_B17\fP, \fBPARAM_STANDARD_FORMAT_LR18\fP, \fBPARAM_STANDARD_FORMAT_B18\fP, \fBPARAM_STANDARD_FORMAT_LR19\fP, \fBPARAM_STANDARD_FORMAT_B19\fP, \fBPARAM_STANDARD_FORMAT_LR20\fP, \fBPARAM_STANDARD_FORMAT_B20\fP }"
.br
.RI "
.br
 This enumeration class defines the Indexes of the Parameters Registers  "
.in -1c
.in +1c
.ti -1c
.RI "static \fBcollimationModeEnum\fP \fBcollimationMode\fP"
.br
.RI "Sets the current collimation mode\&. "
.ti -1c
.RI "static bool \fBvalid_collimation_format\fP"
.br
.RI "This flag is set when the collimation format is correct and coherent with the collimationMode register\&. "
.ti -1c
.RI "static bool \fBcollimator_fault\fP"
.br
.RI "This flag is set when the collimator is in fault condition\&. "
.ti -1c
.RI "static int \fBformat_collimation_attempt\fP"
.br
.RI "This register counts the attempt to exit from a fault condition\&. "
.ti -1c
.RI "static \fBColliStandardSelections\fP \fBcustomStandardSelection\fP"
.br
.RI "Custom 2D standard format requested (in case of CUSTOM mode) "
.ti -1c
.RI "static \fBformatBlades\fP \fBcalibrationBlades\fP"
.br
.ti -1c
.RI "static \fBCollimationStatusCode\fP \fBcollimation_status\fP"
.br
.RI "last status collimation status read "
.ti -1c
.RI "static \fBColliStandardSelections\fP \fBformat_index\fP"
.br
.RI "last status format index read "
.ti -1c
.RI "static unsigned char \fBsystem_flags\fP"
.br
.RI "Last system flags\&. "
.ti -1c
.RI "static \fBColliStandardSelections\fP \fBgetAutomaticStandardFormatIndex\fP (void)"
.br
.RI "Retrives what is the current automatic format to be calibrated\&. "
.in -1c
.in +1c
.ti -1c
.RI "void \fBresetLoop\fP (void) override"
.br
.RI "This is the Base class resetLoop override function\&. "
.ti -1c
.RI "virtual void \fBrunningLoop\fP (void) override"
.br
.RI "This is the Base Class override function to handle the normal operation workflow\&. "
.ti -1c
.RI "bool \fBconfigurationLoop\fP (void) override"
.br
.RI "This is the Base Class override function to handle the device configuration\&. "
.ti -1c
.RI "bool \fBupdateStatusRegister\fP (void)"
.br
.ti -1c
.RI "void \fBformatCollimationManagement\fP (void)"
.br
.RI "Read the status registers and handle the related bytes\&. "
.in -1c
.SS "Additional Inherited Members"
.SH "Detailed Description"
.PP 
This class implements the functions of the \fBPCB303\fP Module 


.SH "Member Enumeration Documentation"
.PP 
.SS "enum class \fBPCB303::CollimationStatusCode\fP\fC [strong]\fP, \fC [private]\fP"

.PP
This is the SYSTEM_COLLIMATION_STATUS byte definition of the SYSTEM status register\&.  
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fICOLLI_STATUS_OPEN_FORMAT \fP\fP
The open format is currently selected\&. 
.TP
\fB\fICOLLI_STATUS_STANDARD_FORMAT \fP\fP
The standard format is currently selected (see the STATUS FORMAT INDEX in that case) 
.TP
\fB\fICOLLI_STATUS_CALIB_FORMAT \fP\fP
The Calibration format is currently selected\&. 
.TP
\fB\fICOLLI_STATUS_TOMO_MODE \fP\fP
The Tomo mode is currently active\&. 
.TP
\fB\fICOLLI_STATUS_OUT_OF_POSITION \fP\fP
Not a valid collimation format is selected\&. 
.TP
\fB\fICOLLI_STATUS_2D_EXECUTING \fP\fP
A 2D collimation format selection is executing\&. 
.SS "enum class \fBPCB303::ColliStandardSelections\fP\fC [strong]\fP"

.PP
This is the SYSTEM_FORMAT_INDEX byte definition of the SYSTEM status register\&. This byte reports the current select collimation format\&.  
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fICOLLI_NOT_STANDARD \fP\fP
When an OPEN format or CALIBRATION format is selected this is reported as a non standard format active\&. 
.TP
\fB\fICOLLI_INVALID_FORMAT \fP\fP
This is the code assigned to a Not valid collimatoion format code\&. 
.TP
\fB\fICOLLI_STANDARD1 \fP\fP
The current selected format is the STANDARD1\&. 
.TP
\fB\fICOLLI_STANDARD_24x30 \fP\fP
The special code is reserved to the 24x30 collimation, assigned to the COLLI_STANDARD1\&. 
.TP
\fB\fICOLLI_STANDARD2 \fP\fP
The current selected format is the STANDARD2\&. 
.TP
\fB\fICOLLI_STANDARD3 \fP\fP
The current selected format is the STANDARD3\&. 
.TP
\fB\fICOLLI_STANDARD4 \fP\fP
The current selected format is the STANDARD4\&. 
.TP
\fB\fICOLLI_STANDARD5 \fP\fP
The current selected format is the STANDARD5\&. 
.TP
\fB\fICOLLI_STANDARD6 \fP\fP
The current selected format is the STANDARD6\&. 
.TP
\fB\fICOLLI_STANDARD7 \fP\fP
The current selected format is the STANDARD7\&. 
.TP
\fB\fICOLLI_STANDARD8 \fP\fP
The current selected format is the STANDARD8\&. 
.TP
\fB\fICOLLI_STANDARD9 \fP\fP
The current selected format is the STANDARD9\&. 
.TP
\fB\fICOLLI_STANDARD10 \fP\fP
The current selected format is the STANDARD10\&. 
.TP
\fB\fICOLLI_STANDARD11 \fP\fP
The current selected format is the STANDARD11\&. 
.TP
\fB\fICOLLI_STANDARD12 \fP\fP
The current selected format is the STANDARD12\&. 
.TP
\fB\fICOLLI_STANDARD13 \fP\fP
The current selected format is the STANDARD13\&. 
.TP
\fB\fICOLLI_STANDARD14 \fP\fP
The current selected format is the STANDARD14\&. 
.TP
\fB\fICOLLI_STANDARD15 \fP\fP
The current selected format is the STANDARD15\&. 
.TP
\fB\fICOLLI_STANDARD16 \fP\fP
The current selected format is the STANDARD16\&. 
.TP
\fB\fICOLLI_STANDARD17 \fP\fP
The current selected format is the STANDARD17\&. 
.TP
\fB\fICOLLI_STANDARD18 \fP\fP
The current selected format is the STANDARD18\&. 
.TP
\fB\fICOLLI_STANDARD19 \fP\fP
The current selected format is the STANDARD19\&. 
.TP
\fB\fICOLLI_STANDARD20 \fP\fP
The current selected format is the STANDARD20\&. 
.TP
\fB\fICOLLI_STANDARD_LEN \fP\fP
.SS "enum class \fBPCB303::Commandregister\fP\fC [strong]\fP, \fC [private]\fP"

.PP

.br
 This enumeration class defines the Indexes of the Command Execution 
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fIABORT_COMMAND \fP\fP
Abort Command (mandatory as for device protocol) 
.TP
\fB\fISET_OPEN_FORMAT_COMMAND \fP\fP
Selects the Open Collimation\&. 
.TP
\fB\fISET_STANDARD_FORMAT_COMMAND \fP\fP
Selects the Standard Collimation\&. 
.TP
\fB\fISET_CALIBRATION_FORMAT_COMMAND \fP\fP
Selects the Calibration Collimation\&. 
.TP
\fB\fISET_TOMO_MODE_COMMAND \fP\fP
Selects the Tomo Collimation\&. 
.SS "enum class \fBPCB303::DataRegisters\fP\fC [strong]\fP"

.PP
This is the enumeration class definigs the indexes of the protocol DATA registers 
.br
  
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fIDATA_CALIBRATION_FB \fP\fP
The Application shall set this register in CALIBRATION to set the Front and Back blades positions\&. 
.TP
\fB\fIDATA_CALIBRATION_LR \fP\fP
The Application shall set this register in CALIBRATION to set the Left and Right blades positions\&. 
.TP
\fB\fIDATA_CALIBRATION_T \fP\fP
The Application shall set this register in CALIBRATION to set the Trap blade positions\&. 
.SS "enum class \fBPCB303::ParamRegisters\fP\fC [strong]\fP"

.PP

.br
 This enumeration class defines the Indexes of the Parameters Registers  
.br
 
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fIPARAM_STANDARD_FORMAT_FT \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR1 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B1 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR2 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B2 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR3 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B3 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR4 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B4 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR5 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B5 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR6 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B6 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR7 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B7 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR8 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B8 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR9 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B9 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR10 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B10 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR11 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B11 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR12 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B12 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR13 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B13 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR14 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B14 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR15 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B15 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR16 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B16 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR17 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B17 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR18 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B18 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR19 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B19 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_LR20 \fP\fP
.TP
\fB\fIPARAM_STANDARD_FORMAT_B20 \fP\fP
.SS "enum class \fBPCB303::StatusDataBytes\fP\fC [strong]\fP, \fC [private]\fP"

.PP
This enumeration class defines the data content (D0 to D3) of the System Status Register\&.  
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fISYSTEM_COLLIMATION_STATUS \fP\fP
.TP
\fB\fISYSTEM_FORMAT_INDEX \fP\fP

.PP
.RS 4
Collimation status data byte see (CollimationStatusCode) 
.RE
.PP
Current selected standard collimation format index (see ColliStandardSelections) 
.TP
\fB\fISYSTEM_TOMO_PULSE \fP\fP
Current Tomo pulse processing in Tomo dynamic mode\&. 
.TP
\fB\fISYSTEM_SPARE \fP\fP
.SS "enum class \fBPCB303::StatusRegisters\fP\fC [strong]\fP, \fC [private]\fP"

.PP

.br
 This enumeration class defines the Indexes of the protocol Status Registers  
.PP
\fBEnumerator\fP
.in +1c
.TP
\fB\fISYSTEM_STATUS_REGISTER \fP\fP
System status register index (see StatusDataBytes) 
.TP
\fB\fISYSTEM_CURRENT_FB_REGISTER \fP\fP
This is the current Front and Back position (if the position is valid) 
.TP
\fB\fISYSTEM_CURRENT_LR_REGISTER \fP\fP
This is the current Left and Right position (if the position is valid) 
.TP
\fB\fISYSTEM_CURRENT_T_REGISTER \fP\fP
This is the current Trap position (if the position is valid) 
.SH "Member Data Documentation"
.PP 
.SS "\fBPCB303\fP ^ PCB303::device = gcnew \fBPCB303\fP()\fC [static]\fP"


.SH "Author"
.PP 
Generated automatically by Doxygen for MCPU_MASTER Software Description from the source code\&.
