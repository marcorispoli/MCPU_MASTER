.TH "PCB315_Interface" 3 "MCPU" \" -*- nroff -*-
.ad l
.nh
.SH NAME
PCB315_Interface \- Application Interface
.SH SYNOPSIS
.br
.PP
.SS "Macros"

.in +1c
.ti -1c
.RI "#define \fBPCB315_ERROR_BULB_HIGH\fP(reg)"
.br
.RI "This is the Bulb sensor high temperature\&. "
.ti -1c
.RI "#define \fBPCB315_ERROR_BULB_SHORT\fP(reg)"
.br
.RI "This is the Bulb sensor connetions open\&. "
.ti -1c
.RI "#define \fBPCB315_ERROR_STATOR_LOW\fP(reg)"
.br
.RI "This is the Bulb sensor low level\&. "
.ti -1c
.RI "#define \fBPCB315_ERROR_STATOR_HIGH\fP(reg)"
.br
.RI "This is the Bulb sensor high temperature\&. "
.ti -1c
.RI "#define \fBPCB315_ERROR_STATOR_SHORT\fP(reg)"
.br
.RI "This is the Bulb sensor connetions open\&. "
.ti -1c
.RI "#define \fBPCB315_ERROR_FILTER_SELECTION\fP(reg)"
.br
.RI "This is the Filter selection error\&. "
.ti -1c
.RI "#define \fBPCB315_GET_SYSTEM_FILTER\fP(reg)"
.br
.RI "This macro returns the FILTER byte of the SYSTEM register\&. "
.ti -1c
.RI "#define \fBPCB315_GET_SYSTEM_STATOR\fP(reg)"
.br
.RI "This macro returns the STATOR byte of the SYSTEM register\&. "
.ti -1c
.RI "#define \fBPCB315_GET_SYSTEM_BULB\fP(reg)"
.br
.RI "This macro returns the BULB byte of the SYSTEM register\&. "
.ti -1c
.RI "#define \fBPCB315_GET_SYSTEM_FLAGS\fP(reg)"
.br
.RI "This macro returns the FLAGS byte of the SYSTEM register\&. "
.ti -1c
.RI "#define \fBPCB315_GET_LIGHT_FLAG\fP(flags)"
.br
.RI "This macro returns the Light On flag\&. "
.ti -1c
.RI "#define \fBPCB315_GET_ERROR_FLAG\fP(flags)"
.br
.RI "This macro returns the status of the Error present condition\&. "
.ti -1c
.RI "#define \fBPCB315_WRITE_FILTER1_REGISTER\fP(val)"
.br
.ti -1c
.RI "#define \fBPCB315_WRITE_FILTER2_REGISTER\fP(val)"
.br
.ti -1c
.RI "#define \fBPCB315_WRITE_FILTER3_REGISTER\fP(val)"
.br
.ti -1c
.RI "#define \fBPCB315_WRITE_FILTER4_REGISTER\fP(val)"
.br
.ti -1c
.RI "#define \fBPCB315_WRITE_MIRROR_REGISTER\fP(val)"
.br
.ti -1c
.RI "#define \fBPCB315_WRITE_POWERLIGHT_REGISTER\fP(val)"
.br
.ti -1c
.RI "#define \fBPCB315_SET_POSITIONER_COMMAND\fP(cmd)"
.br
.RI "This is the SET_POSITIONER_COMMAND byte frame\&. "
.ti -1c
.RI "#define \fBPCB315_SET_LIGH_COMMAND\fP(cmd)"
.br
.RI "This is the SET_POSITIONER_COMMAND byte frame\&. "
.in -1c
.SS "Enumerations"

.in +1c
.ti -1c
.RI "enum class \fBPCB315::filterMaterialCodes\fP { \fBPCB315::filterMaterialCodes::FILTER_DEFAULT\fP =0, \fBPCB315::filterMaterialCodes::FILTER_AG\fP, \fBPCB315::filterMaterialCodes::FILTER_AL\fP, \fBPCB315::filterMaterialCodes::FILTER_MO\fP, \fBPCB315::filterMaterialCodes::FILTER_RH\fP, \fBPCB315::filterMaterialCodes::FILTER_CU\fP, \fBPCB315::filterMaterialCodes::FILTER_LEN\fP, \fBPCB315::filterMaterialCodes::FILTER_INVALID\fP = FILTER_LEN }"
.br
.RI "This is the enumeration class defining the possible selectable filters\&. "
.ti -1c
.RI "enum class \fBPCB315::filterWorkingMode\fP { \fBPCB315::filterWorkingMode::FILTER_AUTO_MODE\fP = 0, \fBPCB315::filterWorkingMode::FILTER_MANUAL_MODE\fP, \fBPCB315::filterWorkingMode::FILTER_MIRROR_MODE\fP }"
.br
.RI "This enumeration class defines the possibles filter working modes\&. "
.in -1c
.SS "Functions"

.in +1c
.ti -1c
.RI "\fBPCB315::PCB315\fP ()"
.br
.RI "\fBPCB315\fP Class constructor\&. "
.in -1c
.in +1c
.ti -1c
.RI "static \fBcomponent_options\fP \fBPCB315::getComponent\fP (void)"
.br
.ti -1c
.RI "static unsigned char \fBPCB315::getStator\fP (void)"
.br
.RI "This function returns the current Stator temperature in Percent\&. "
.ti -1c
.RI "static unsigned char \fBPCB315::getBulb\fP (void)"
.br
.RI "This function returns the current Bulb temperature in Percent\&. "
.ti -1c
.RI "static unsigned char \fBPCB315::getAnode\fP (void)"
.br
.RI "This function returns the current Anode cumulated HU in percent\&. "
.ti -1c
.RI "static bool \fBPCB315::isTubeAlarm\fP (void)"
.br
.RI "This function provides a quick info about the Temperature alarm active irrespective of which alarm is actually present (stator, bulb or anode) "
.ti -1c
.RI "static \fBfilterMaterialCodes\fP \fBPCB315::getFilterFromTag\fP (System::String^ filter_tag)"
.br
.RI "Returns the Filter selection code\&. "
.ti -1c
.RI "static System::String ^ \fBPCB315::getTagFromFilter\fP (\fBfilterMaterialCodes\fP filter)"
.br
.RI "Returns the Filter name\&. "
.ti -1c
.RI "static bool \fBPCB315::setFilterAutoMode\fP (\fBfilterMaterialCodes\fP code, bool wait_completion)"
.br
.RI "This function sets the Auto mode, assigning the filter to be selected\&. "
.ti -1c
.RI "static void \fBPCB315::setFilterAutoMode\fP (void)"
.br
.RI "This function acctivates the auto mode: the selected filter has been already set\&. "
.ti -1c
.RI "static void \fBPCB315::setFilterManualMode\fP (\fBfilterMaterialCodes\fP code)"
.br
.RI "This function activates the manaul mode assigning the filter to be selected\&. "
.ti -1c
.RI "static void \fBPCB315::setFilterManualMode\fP (void)"
.br
.RI "This function activates the manaul mode: the filter shall be already set\&. "
.ti -1c
.RI "static void \fBPCB315::setMirrorMode\fP (bool request_power_light)"
.br
.RI "This function activates the Mirror Mode and the light (if requested) "
.ti -1c
.RI "static bool \fBPCB315::waitForValidFilter\fP (void)"
.br
.RI "This function waits that a valid filter is selected\&. "
.ti -1c
.RI "static bool \fBPCB315::getPowerLightStatus\fP (void)"
.br
.RI "This function returns the current status of the Power light\&. "
.ti -1c
.RI "static bool \fBPCB315::isValidFilterSelected\fP (void)"
.br
.ti -1c
.RI "static bool \fBPCB315::isFilterFault\fP (void)"
.br
.in -1c
.SH "Detailed Description"
.PP 

.SH "Macro Definition Documentation"
.PP 
.SS "#define PCB315_ERROR_BULB_HIGH( reg)"
\fBValue:\fP
.nf
(reg\->d2 & 0x2)
.PP
.fi

.PP
This is the Bulb sensor high temperature\&. 
.SS "#define PCB315_ERROR_BULB_SHORT( reg)"
\fBValue:\fP
.nf
(reg\->d2 & 0x4)
.PP
.fi

.PP
This is the Bulb sensor connetions open\&. 
.SS "#define PCB315_ERROR_FILTER_SELECTION( reg)"
\fBValue:\fP
.nf
(reg\->d2 & 0x40)
.PP
.fi

.PP
This is the Filter selection error\&. 
.SS "#define PCB315_ERROR_STATOR_HIGH( reg)"
\fBValue:\fP
.nf
(reg\->d2 & 0x10)
.PP
.fi

.PP
This is the Bulb sensor high temperature\&. 
.SS "#define PCB315_ERROR_STATOR_LOW( reg)"
\fBValue:\fP
.nf
(reg\->d2 & 0x8)
.PP
.fi

.PP
This is the Bulb sensor low level\&. 
.SS "#define PCB315_ERROR_STATOR_SHORT( reg)"
\fBValue:\fP
.nf
(reg\->d2 & 0x20)
.PP
.fi

.PP
This is the Bulb sensor connetions open\&. 
.SS "#define PCB315_GET_ERROR_FLAG( flags)"
\fBValue:\fP
.nf
((flags) & 0x80)
.PP
.fi

.PP
This macro returns the status of the Error present condition\&. 
.SS "#define PCB315_GET_LIGHT_FLAG( flags)"
\fBValue:\fP
.nf
((flags) & 0x1)
.PP
.fi

.PP
This macro returns the Light On flag\&. 
.SS "#define PCB315_GET_SYSTEM_BULB( reg)"
\fBValue:\fP
.nf
(unsigned char) (reg\->d2)
.PP
.fi

.PP
This macro returns the BULB byte of the SYSTEM register\&. 
.SS "#define PCB315_GET_SYSTEM_FILTER( reg)"
\fBValue:\fP
.nf
(unsigned char) (reg\->d0)
.PP
.fi

.PP
This macro returns the FILTER byte of the SYSTEM register\&. 
.SS "#define PCB315_GET_SYSTEM_FLAGS( reg)"
\fBValue:\fP
.nf
(unsigned char) (reg\->d3)
.PP
.fi

.PP
This macro returns the FLAGS byte of the SYSTEM register\&. 
.SS "#define PCB315_GET_SYSTEM_STATOR( reg)"
\fBValue:\fP
.nf
(unsigned char) (reg\->d1)
.PP
.fi

.PP
This macro returns the STATOR byte of the SYSTEM register\&. 
.SS "#define PCB315_SET_LIGH_COMMAND( cmd)"
\fBValue:\fP
.nf
(System::Byte) Commandregister::SET_LIGHT, (System::Byte) (cmd),(System::Byte) 0,(System::Byte) 0,(System::Byte) 0
.PP
.fi

.PP
This is the SET_POSITIONER_COMMAND byte frame\&. 
.SS "#define PCB315_SET_POSITIONER_COMMAND( cmd)"
\fBValue:\fP
.nf
(System::Byte) Commandregister::SET_POSITIONER_COMMAND, (System::Byte) (cmd),(System::Byte) 0,(System::Byte) 0,(System::Byte) 0
.PP
.fi

.PP
This is the SET_POSITIONER_COMMAND byte frame\&. 
.SS "#define PCB315_WRITE_FILTER1_REGISTER( val)"
\fBValue:\fP
.nf
(System::Byte) ParamRegisters::FILTER1_PARAM_REGISTER,(System::Byte) (val&0xFF), (System::Byte) ((val>>8)&0xFF),(System::Byte) 0, (System::Byte) 0
.PP
.fi

.SS "#define PCB315_WRITE_FILTER2_REGISTER( val)"
\fBValue:\fP
.nf
(System::Byte) ParamRegisters::FILTER2_PARAM_REGISTER,(System::Byte) (val&0xFF), (System::Byte) ((val>>8)&0xFF),(System::Byte) 0, (System::Byte) 0
.PP
.fi

.SS "#define PCB315_WRITE_FILTER3_REGISTER( val)"
\fBValue:\fP
.nf
(System::Byte) ParamRegisters::FILTER3_PARAM_REGISTER,(System::Byte) (val&0xFF), (System::Byte) ((val>>8)&0xFF),(System::Byte) 0, (System::Byte) 0
.PP
.fi

.SS "#define PCB315_WRITE_FILTER4_REGISTER( val)"
\fBValue:\fP
.nf
(System::Byte) ParamRegisters::FILTER4_PARAM_REGISTER,(System::Byte) (val&0xFF), (System::Byte) ((val>>8)&0xFF),(System::Byte) 0, (System::Byte) 0
.PP
.fi

.SS "#define PCB315_WRITE_MIRROR_REGISTER( val)"
\fBValue:\fP
.nf
(System::Byte) ParamRegisters::MIRROR_PARAM_REGISTER,(System::Byte) (val&0xFF), (System::Byte) 0,(System::Byte) 0, (System::Byte) 0
.PP
.fi

.SS "#define PCB315_WRITE_POWERLIGHT_REGISTER( val)"
\fBValue:\fP
.nf
(System::Byte) ParamRegisters::POWERLIGHT_PARAM_REGISTER,(System::Byte) (val&0xFF), (System::Byte) 0,(System::Byte) 0, (System::Byte) 0
.PP
.fi

.SH "Enumeration Type Documentation"
.PP 
.SS "enum class \fBPCB315::filterMaterialCodes\fP\fR [strong]\fP"

.PP
This is the enumeration class defining the possible selectable filters\&. The FILTER_DEFAULT is a special selection code that
.br
 causes a selection of a filter defined into the FilterCalibraiton file\&.

.PP
The Module set this value at the system startup to provide an initial Filter selection\&.

.PP
The Application should use this selection whenever an initial state should be applied\&. 
.PP
\fBEnumerator\fP
.in +1c
.TP
\f(BIFILTER_DEFAULT \fP
This is a default filter set in the FilterCalibration configuration file\&. 
.TP
\f(BIFILTER_AG \fP
Ag Application selection option\&. 
.TP
\f(BIFILTER_AL \fP
Al Application selection option\&. 
.TP
\f(BIFILTER_MO \fP
Mo Application selection option\&. 
.TP
\f(BIFILTER_RH \fP
Rh Application selection option\&. 
.TP
\f(BIFILTER_CU \fP
Cu Application selection option 
.br
 
.TP
\f(BIFILTER_LEN \fP
Reserved for internal usage\&. 
.TP
\f(BIFILTER_INVALID \fP
Reserved for internal usage\&. 
.SS "enum class \fBPCB315::filterWorkingMode\fP\fR [strong]\fP"

.PP
This enumeration class defines the possibles filter working modes\&. 
.PP
\fBEnumerator\fP
.in +1c
.TP
\f(BIFILTER_AUTO_MODE \fP
The filter is selected by the aws for the exposure mode\&. 
.TP
\f(BIFILTER_MANUAL_MODE \fP
The filter is selected manually\&. 
.TP
\f(BIFILTER_MIRROR_MODE \fP
The Mirror shall be selected\&. 
.SH "Function Documentation"
.PP 
.SS "static unsigned char PCB315::getAnode (void )\fR [inline]\fP, \fR [static]\fP"

.PP
This function returns the current Anode cumulated HU in percent\&. 
.PP
\fBReturns\fP
.RS 4
The percent of the Anode cumulated HU
.RE
.PP

.SS "static unsigned char PCB315::getBulb (void )\fR [inline]\fP, \fR [static]\fP"

.PP
This function returns the current Bulb temperature in Percent\&. The Percent value is calculated:
.IP "\(bu" 2
0%: the temperature is < 20°;
.IP "\(bu" 2
100%: the temperature is >= 105°

.PP
Note: in case of fault, this value is 0
.PP

.PP
\fBReturns\fP
.RS 4
The percent of the Bulb temperature
.RE
.PP

.SS "\fBPCB315::filterMaterialCodes\fP PCB315::getFilterFromTag (System::String^ filter_tag)\fR [static]\fP"

.PP
Returns the Filter selection code\&. This is a convenient function to convert the Material Filter name to the Enumeration code\&.

.PP
The current implemented filter names are:
.IP "\(bu" 2
'Ag'
.IP "\(bu" 2
'Al'
.IP "\(bu" 2
'Rh'
.IP "\(bu" 2
'Cu'
.IP "\(bu" 2
'Mo'
.PP

.PP
\fBParameters\fP
.RS 4
\fIfilter_tag\fP 
.RE
.PP
\fBReturns\fP
.RS 4
.RE
.PP

.SS "static bool PCB315::getPowerLightStatus (void )\fR [inline]\fP, \fR [static]\fP"

.PP
This function returns the current status of the Power light\&. 
.PP
\fBReturns\fP
.RS 4
true if the power light is currently ON
.RE
.PP

.SS "static unsigned char PCB315::getStator (void )\fR [inline]\fP, \fR [static]\fP"

.PP
This function returns the current Stator temperature in Percent\&. The Percent value is calculated:
.IP "\(bu" 2
0%: the temperature is < 20°;
.IP "\(bu" 2
100%: the temperature is >= 105°

.PP
Note: in case of fault, this value is 0
.PP

.PP
\fBReturns\fP
.RS 4
The percent of the Stator temperature
.RE
.PP

.SS "System::String PCB315::getTagFromFilter (\fBfilterMaterialCodes\fP filter)\fR [static]\fP"

.PP
Returns the Filter name\&. This is a convenient function to convert the Filter Enumeration code to the Filter Material name\&.

.PP
The current implemented filter names are:
.IP "\(bu" 2
'Ag'
.IP "\(bu" 2
'Al'
.IP "\(bu" 2
'Rh'
.IP "\(bu" 2
'Cu'
.IP "\(bu" 2
'Mo'
.IP "\(bu" 2
'UNDEF' for invalid codes
.PP

.PP
\fBParameters\fP
.RS 4
\fIfilter_tag\fP 
.RE
.PP
\fBReturns\fP
.RS 4
.RE
.PP

.SS "static bool PCB315::isTubeAlarm (void )\fR [inline]\fP, \fR [static]\fP"

.PP
This function provides a quick info about the Temperature alarm active irrespective of which alarm is actually present (stator, bulb or anode) /// 

.PP
\fBReturns\fP
.RS 4
The alarm condition due to temperature
.RE
.PP

.br
 
.SS "PCB315::PCB315 ()\fR [inline]\fP"

.PP
\fBPCB315\fP Class constructor\&. The construction initializes several internal variables\&. The constructor call the base class setting the address of the controlled device\&.

.PP
As soon as the base class is initialized, the communication process starts and the device is initialized with \fBconfigurationLoop()\fP routine\&. 
.SS "bool PCB315::setFilterAutoMode (\fBfilterMaterialCodes\fP code, bool wait_completion)\fR [static]\fP"

.PP
This function sets the Auto mode, assigning the filter to be selected\&. This function activate the Automatic mode assigning what is the Filter slot to be selected in the Filter device\&.

.PP
The Application filter selection talks about Filter material,
.br
wheather the internal filter management talks about filter slot\&.

.PP
setFilterAutoMode( filter-material ) --> Auto Filter Slot = slot assigned to the filter-material

.PP
\fBParameters\fP
.RS 4
\fIcode\fP The Filter (material) requested
.RE
.PP

.SS "void PCB315::setFilterAutoMode (void )\fR [static]\fP"

.PP
This function acctivates the auto mode: the selected filter has been already set\&. This function activates the Filter Auto mode;
.br
The filter selection however shall be already selected\&.
.SS "void PCB315::setFilterManualMode (\fBfilterMaterialCodes\fP code)\fR [static]\fP"

.PP
This function activates the manaul mode assigning the filter to be selected\&. This function activate the Manual mode assigning what is the Filter slot to be selected in the Filter device\&.

.PP
The Application filter selection talks about Filter material,
.br
wheather the internal filter management talks about filter slot\&.

.PP
setFilterManaulMode( filter-material ) --> Manaul Filter Slot = slot assigned to the filter-material

.PP
\fBParameters\fP
.RS 4
\fIcode\fP The Filter (material) requested
.RE
.PP

.SS "void PCB315::setFilterManualMode (void )\fR [static]\fP"

.PP
This function activates the manaul mode: the filter shall be already set\&. This function activates the Filter Manual mode;
.br
The filter selection however shall be already selected\&.
.SS "void PCB315::setMirrorMode (bool light)\fR [static]\fP"

.PP
This function activates the Mirror Mode and the light (if requested) This function activates the Mirror mode:

.PP
in the mirror mode, the mirror is selected in the Filter Device allowing the usage of the colliamtion light\&.

.PP
When the Mirror is positioned, the light is switched on automatically\&.

.PP
Because the light remains active for a limited time, the application can reactivate the light calling ones more this function\&.

.PP
\fBParameters\fP
.RS 4
\fIlight\fP request the activation of the light
.RE
.PP

.SS "bool PCB315::waitForValidFilter (void )\fR [static]\fP"

.PP
This function waits that a valid filter is selected\&. This function waits for a maximum of 2\&.5 seconds that a valid filter is selected\&.

.PP
The filter shall be selected before to call this function\&.

.PP
\fBReturns\fP
.RS 4
.RE
.PP

.SH "Author"
.PP 
Generated automatically by Doxygen for MCPU from the source code\&.
