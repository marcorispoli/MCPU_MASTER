\doxysection{Tcp\+Ip\+Server\+CLI Class Reference}
\label{class_tcp_ip_server_c_l_i}\index{TcpIpServerCLI@{TcpIpServerCLI}}


{\ttfamily \#include $<$Tcp\+Ip\+Server\+CLI.\+h$>$}

Inheritance diagram for Tcp\+Ip\+Server\+CLI\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_tcp_ip_server_c_l_i}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
delegate void \textbf{ rx\+Data\+\_\+slot} (array$<$ Byte $>$$^\wedge$ receive\+Buffer, int rc)
\begin{DoxyCompactList}\small\item\em This is the delegate of the reception handler. \end{DoxyCompactList}\item 
delegate void \textbf{ connection\+\_\+slot} (bool status)
\begin{DoxyCompactList}\small\item\em This is the delegate of the connection handler. \end{DoxyCompactList}\item 
\textbf{ Tcp\+Ip\+Server\+CLI} (String$^\wedge$ ip, int port)
\begin{DoxyCompactList}\small\item\em This is the class constructor. \end{DoxyCompactList}\item 
void \textbf{ send} (array$<$ Byte $>$$^\wedge$ buffer)
\begin{DoxyCompactList}\small\item\em This is function to send data in the BUS. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ thread\+Work} (void)
\begin{DoxyCompactList}\small\item\em This is the worker thread for the connection management. \end{DoxyCompactList}\item 
virtual void \textbf{ Wnd\+Proc} (System\+::\+Windows\+::\+Forms\+::\+Message\% m) override
\begin{DoxyCompactList}\small\item\em This is the function handling the Window\textquotesingle{}s messages. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Events}
\begin{DoxyCompactItemize}
\item 
\textbf{ rx\+Data\+\_\+slot}$^\wedge$ \textbf{ rx\+Data\+\_\+event}
\begin{DoxyCompactList}\small\item\em Reception event. \end{DoxyCompactList}\item 
\textbf{ connection\+\_\+slot}$^\wedge$ \textbf{ connection\+\_\+event}
\begin{DoxyCompactList}\small\item\em Connection event. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
HWND \textbf{ window}
\begin{DoxyCompactList}\small\item\em This is Form\textquotesingle{}s class handler. \end{DoxyCompactList}\item 
Thread $^\wedge$ \textbf{ running\+\_\+thread}
\begin{DoxyCompactList}\small\item\em This is the worker thread handler. \end{DoxyCompactList}\item 
Socket $^\wedge$ \textbf{ server\+Socket}
\begin{DoxyCompactList}\small\item\em This is the server socket handler. \end{DoxyCompactList}\item 
Socket $^\wedge$ \textbf{ client\+Socket}
\begin{DoxyCompactList}\small\item\em This is the connected client socket handler. \end{DoxyCompactList}\item 
HANDLE \textbf{ gh\+Semaphore}
\begin{DoxyCompactList}\small\item\em This is the semaphore used to protect the received buffer during the buffer dispatching. \end{DoxyCompactList}\item 
bool \textbf{ connection\+\_\+status}
\begin{DoxyCompactList}\small\item\em This is the current connection status. \end{DoxyCompactList}\item 
int \textbf{ rx\+\_\+rc}
\begin{DoxyCompactList}\small\item\em This is the number of the received bytes. \end{DoxyCompactList}\item 
array$<$ Byte $>$ $^\wedge$ \textbf{ rx\+Buffer}
\begin{DoxyCompactList}\small\item\em This is the reception buffer. \end{DoxyCompactList}\item 
int \textbf{ dispatch\+\_\+rc}
\begin{DoxyCompactList}\small\item\em This is the number of the byte to be dispatched. \end{DoxyCompactList}\item 
array$<$ Byte $>$ $^\wedge$ \textbf{ dispatch\+Buffer}
\begin{DoxyCompactList}\small\item\em This is the buffer to be dispatched. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\label{class_tcp_ip_server_c_l_i_a6eed1616ab03b40a8ecbd53c960da0bf} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!TcpIpServerCLI@{TcpIpServerCLI}}
\index{TcpIpServerCLI@{TcpIpServerCLI}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{TcpIpServerCLI()}
{\footnotesize\ttfamily Tcp\+Ip\+Server\+CLI\+::\+Tcp\+Ip\+Server\+CLI (\begin{DoxyParamCaption}\item[{String$^\wedge$}]{ip,  }\item[{int}]{port }\end{DoxyParamCaption})}



This is the class constructor. 

This is the Class constructor.

The constructor creates all the data necessaries to create the server socket.

After the data initialization the constructor runs the worker thread for the Listening and data reception. The thread is self destroying when the program closes.


\begin{DoxyParams}{Parameters}
{\em ip} & This is a String for the IP address\\
\hline
{\em port} & This is an integer value for thr server port\\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\label{class_tcp_ip_server_c_l_i_a908af76ef4c3038af75bbf36fffc2a5f} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!connection\_slot@{connection\_slot}}
\index{connection\_slot@{connection\_slot}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{connection\_slot()}
{\footnotesize\ttfamily delegate void Tcp\+Ip\+Server\+CLI\+::connection\+\_\+slot (\begin{DoxyParamCaption}\item[{bool}]{status }\end{DoxyParamCaption})}



This is the delegate of the connection handler. 

\label{class_tcp_ip_server_c_l_i_a18a5ad228159b10eeee589e125026e1b} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!rxData\_slot@{rxData\_slot}}
\index{rxData\_slot@{rxData\_slot}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{rxData\_slot()}
{\footnotesize\ttfamily delegate void Tcp\+Ip\+Server\+CLI\+::rx\+Data\+\_\+slot (\begin{DoxyParamCaption}\item[{array$<$ Byte $>$$^\wedge$}]{receive\+Buffer,  }\item[{int}]{rc }\end{DoxyParamCaption})}



This is the delegate of the reception handler. 

\label{class_tcp_ip_server_c_l_i_afc80e45db82182f94cc9688e5afc7dde} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!send@{send}}
\index{send@{send}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{send()}
{\footnotesize\ttfamily void Tcp\+Ip\+Server\+CLI\+::send (\begin{DoxyParamCaption}\item[{array$<$ Byte $>$$^\wedge$}]{buffer }\end{DoxyParamCaption})}



This is function to send data in the BUS. 

This function sends a buffer on the bus.


\begin{DoxyParams}{Parameters}
{\em buffer} & This is the data buffer to be sent\\
\hline
\end{DoxyParams}
\label{class_tcp_ip_server_c_l_i_a891266be9f4b279ee1013d3d7221e374} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!threadWork@{threadWork}}
\index{threadWork@{threadWork}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{threadWork()}
{\footnotesize\ttfamily void Tcp\+Ip\+Server\+CLI\+::thread\+Work (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}



This is the worker thread for the connection management. 

There are a two nexted loops\+:
\begin{DoxyItemize}
\item The first is for the listening and connection management;~\newline

\item The second is for the data reception.
\end{DoxyItemize}

When a conmnection is closed, the first loop automatically enters in listening in order to wait for a further connection. Only one connection at a time is allowed!!

Whenever a connection status changes, the worjer thread update the Applicaition rising an event for the connection notify.

When a buffer is received, a semaphore is used to lock the thread until the previous received buffer has been dispatched. When the semaphore is ready, the received buffer is copied into the dispatch buffer in order to be safely sent to the destination.

The buffer is then dispatched in two steps\+:
\begin{DoxyItemize}
\item 1\+: a message with the data buffer from the worker thread is Posted to the main thread\textquotesingle{}s message queue, where this class resides;
\item 2\+: the message is self-\/received by the class that can safely rise an event handler;
\item 3\+: the event handler with the received buffer can now be safely (thread safe) consumed by any class or Form residing into the Applicaiton Main Thread.
\end{DoxyItemize}\label{class_tcp_ip_server_c_l_i_a0b0d99981eed1bc083d6a54ca52b64a2} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!WndProc@{WndProc}}
\index{WndProc@{WndProc}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{WndProc()}
{\footnotesize\ttfamily void Tcp\+Ip\+Server\+CLI\+::\+Wnd\+Proc (\begin{DoxyParamCaption}\item[{System\+::\+Windows\+::\+Forms\+::\+Message\%}]{m }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



This is the function handling the Window\textquotesingle{}s messages. 

This is the ovverride function for the Window\textquotesingle{}s messages.

The function shall receive the messages generated by the worker thread in order to rise events for the connection status and the data received.

When the data is received (message Tcp\+Ip\+Server\+CLI\+\_\+\+DISPATCH\+\_\+\+MESSAGE) the \doxyref{rx\+Data\+\_\+event()}{p.}{class_tcp_ip_server_c_l_i_ab1a12e5d6910c4519a2c1099039b55dd} is generated.

When the client gets a connection with the server (message Tcp\+Ip\+Server\+CLI\+\_\+\+CONNECTION\+\_\+\+MESSAGE) the \doxyref{connection\+\_\+event(true)}{p.}{class_tcp_ip_server_c_l_i_a846cb6b1bbc90d95c6c6c04572eb4902} is generated.

When the client losts a connection with the server (message Tcp\+Ip\+Server\+CLI\+\_\+\+DISCONNECTION\+\_\+\+MESSAGE) the \doxyref{connection\+\_\+event(false)}{p.}{class_tcp_ip_server_c_l_i_a846cb6b1bbc90d95c6c6c04572eb4902} is generated.


\begin{DoxyParams}{Parameters}
{\em m} & \\
\hline
\end{DoxyParams}


\doxysubsection{Member Data Documentation}
\label{class_tcp_ip_server_c_l_i_a08134c8ce98816629613c30a8f9a5ea6} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!clientSocket@{clientSocket}}
\index{clientSocket@{clientSocket}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{clientSocket}
{\footnotesize\ttfamily Socket $^\wedge$ Tcp\+Ip\+Server\+CLI\+::client\+Socket\hspace{0.3cm}{\ttfamily [private]}}



This is the connected client socket handler. 

\label{class_tcp_ip_server_c_l_i_a497bb606d0f4f0635c7ec537b6e81a7c} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!connection\_status@{connection\_status}}
\index{connection\_status@{connection\_status}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{connection\_status}
{\footnotesize\ttfamily bool Tcp\+Ip\+Server\+CLI\+::connection\+\_\+status\hspace{0.3cm}{\ttfamily [private]}}



This is the current connection status. 

\label{class_tcp_ip_server_c_l_i_a3f0e7b75189d664d320b50ba14340ea7} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!dispatch\_rc@{dispatch\_rc}}
\index{dispatch\_rc@{dispatch\_rc}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{dispatch\_rc}
{\footnotesize\ttfamily int Tcp\+Ip\+Server\+CLI\+::dispatch\+\_\+rc\hspace{0.3cm}{\ttfamily [private]}}



This is the number of the byte to be dispatched. 

\label{class_tcp_ip_server_c_l_i_a81c5ee4c59e49656acdcd84b0107f1dc} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!dispatchBuffer@{dispatchBuffer}}
\index{dispatchBuffer@{dispatchBuffer}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{dispatchBuffer}
{\footnotesize\ttfamily array$<$Byte$>$ $^\wedge$ Tcp\+Ip\+Server\+CLI\+::dispatch\+Buffer\hspace{0.3cm}{\ttfamily [private]}}



This is the buffer to be dispatched. 

\label{class_tcp_ip_server_c_l_i_aff812dddf3e8e4e5ac5ba175a39070b7} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!ghSemaphore@{ghSemaphore}}
\index{ghSemaphore@{ghSemaphore}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{ghSemaphore}
{\footnotesize\ttfamily HANDLE Tcp\+Ip\+Server\+CLI\+::gh\+Semaphore\hspace{0.3cm}{\ttfamily [private]}}



This is the semaphore used to protect the received buffer during the buffer dispatching. 

\label{class_tcp_ip_server_c_l_i_a3f996a2d52e00391e9d11319789423d1} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!running\_thread@{running\_thread}}
\index{running\_thread@{running\_thread}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{running\_thread}
{\footnotesize\ttfamily Thread $^\wedge$ Tcp\+Ip\+Server\+CLI\+::running\+\_\+thread\hspace{0.3cm}{\ttfamily [private]}}



This is the worker thread handler. 

\label{class_tcp_ip_server_c_l_i_affbddaaa7536fbc41142da1580f951e6} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!rx\_rc@{rx\_rc}}
\index{rx\_rc@{rx\_rc}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{rx\_rc}
{\footnotesize\ttfamily int Tcp\+Ip\+Server\+CLI\+::rx\+\_\+rc\hspace{0.3cm}{\ttfamily [private]}}



This is the number of the received bytes. 

\label{class_tcp_ip_server_c_l_i_ac2fe9ec40fb2fa63586d8169e7b36392} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!rxBuffer@{rxBuffer}}
\index{rxBuffer@{rxBuffer}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{rxBuffer}
{\footnotesize\ttfamily array$<$Byte$>$ $^\wedge$ Tcp\+Ip\+Server\+CLI\+::rx\+Buffer\hspace{0.3cm}{\ttfamily [private]}}



This is the reception buffer. 

\label{class_tcp_ip_server_c_l_i_ad28ecbcf586a6270a3253937c27c0d23} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!serverSocket@{serverSocket}}
\index{serverSocket@{serverSocket}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{serverSocket}
{\footnotesize\ttfamily Socket $^\wedge$ Tcp\+Ip\+Server\+CLI\+::server\+Socket\hspace{0.3cm}{\ttfamily [private]}}



This is the server socket handler. 

\label{class_tcp_ip_server_c_l_i_aad06bf44f136183d13ee5b934065cdee} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!window@{window}}
\index{window@{window}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{window}
{\footnotesize\ttfamily HWND Tcp\+Ip\+Server\+CLI\+::window\hspace{0.3cm}{\ttfamily [private]}}



This is Form\textquotesingle{}s class handler. 



\doxysubsection{Event Documentation}
\label{class_tcp_ip_server_c_l_i_a846cb6b1bbc90d95c6c6c04572eb4902} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!connection\_event@{connection\_event}}
\index{connection\_event@{connection\_event}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{connection\_event}
{\footnotesize\ttfamily \textbf{ connection\+\_\+slot}$^\wedge$ Tcp\+Ip\+Server\+CLI\+::connection\+\_\+event}



Connection event. 

\label{class_tcp_ip_server_c_l_i_ab1a12e5d6910c4519a2c1099039b55dd} 
\index{TcpIpServerCLI@{TcpIpServerCLI}!rxData\_event@{rxData\_event}}
\index{rxData\_event@{rxData\_event}!TcpIpServerCLI@{TcpIpServerCLI}}
\doxysubsubsection{rxData\_event}
{\footnotesize\ttfamily \textbf{ rx\+Data\+\_\+slot}$^\wedge$ Tcp\+Ip\+Server\+CLI\+::rx\+Data\+\_\+event}



Reception event. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/marco/\+One\+Drive/\+Documenti/\+Visual Studio 2022/\+Projects/\+MCPU/\+MCPU\+\_\+\+MASTER/\textbf{ Tcp\+Ip\+Server\+CLI.\+h}\item 
C\+:/\+Users/marco/\+One\+Drive/\+Documenti/\+Visual Studio 2022/\+Projects/\+MCPU/\+MCPU\+\_\+\+MASTER/\textbf{ Tcp\+Ip\+Server\+CLI.\+cpp}\end{DoxyCompactItemize}
